<UserControl x:Class="Signum.Windows.ControlPanels.ControlPanelEdit"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:m="clr-namespace:Signum.Windows;assembly=Signum.Windows"
    xmlns:d="clr-namespace:Signum.Entities.ControlPanel;assembly=Signum.Entities.Extensions"
    xmlns:swcp="clr-namespace:Signum.Windows.ControlPanels"
    m:Common.TypeContext="d:ControlPanelDN"
    MinWidth="600">
    <StackPanel>
        <m:EntityLine m:Common.Route="Related"/>
        <m:ValueLine m:Common.Route="HomePage"/>
        <m:ValueLine m:Common.Route="DisplayName"/>
        <m:ValueLine m:Common.Route="NumberOfColumns"/>
        <m:EntityRepeater m:Common.Route="Parts" Creating="EntityRepeater_Creating" ViewOnCreate="False">
            <m:EntityRepeater.Resources>
                <Style TargetType="{x:Type m:EntityRepeaterContentControl}" BasedOn="{StaticResource {x:Type m:EntityRepeaterContentControl}}">
                    <Setter Property="swcp:StackColumnPanel.Column" Value="{Binding Column}"/>
                    <Setter Property="swcp:StackColumnPanel.Row" Value="{Binding Row}"/>
                    <Setter Property="Margin" Value="0, 10, 0, 0"/>
                </Style>
            </m:EntityRepeater.Resources>
            <m:EntityRepeater.ItemsPanel>
                <ItemsPanelTemplate>
                    <swcp:StackColumnPanel/>
                </ItemsPanelTemplate>
            </m:EntityRepeater.ItemsPanel>
            <m:EntityRepeater.EntityTemplate>
                <DataTemplate DataType="{x:Type d:PanelPart}">
                    <Grid >
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition />
                            <RowDefinition />
                            <RowDefinition />
                        </Grid.RowDefinitions>
                        <m:ValueLine m:Common.Route="Title" Grid.ColumnSpan="2" Background="{DynamicResource LightBlue}"/>
                        <m:ValueLine m:Common.Route="Row" Grid.Row="1" Grid.Column="0" Background="{DynamicResource LightBlue}"/>
                        <m:ValueLine m:Common.Route="Column" Grid.Row="1" Grid.Column="1" Background="{DynamicResource LightBlue}"/>
                        <m:DataBorder m:Common.Route="Content" AutoChild="True" Grid.Row="2" Grid.ColumnSpan="2"/>
                    </Grid>
                </DataTemplate>
            </m:EntityRepeater.EntityTemplate>
        </m:EntityRepeater>
    </StackPanel>
</UserControl>
